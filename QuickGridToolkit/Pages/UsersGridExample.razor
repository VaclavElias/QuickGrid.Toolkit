@page "/example/users"
<PageTitle>Users</PageTitle>
<div class="row">
    <div class="col-md-12">
        <div class="card mb-3">
            <div class="box-gutter"><h6>Countries</h6></div>
            <div class="ms-2">
                <ColumnSelector ColumnManager="_columnManager" SelectionChanged="SelectionChangedAsync" />
            </div>
            <QuickGrid @ref="_grid" Items="@_items.AsQueryable()" Class="table table-sm table-index table-striped small table-blazor table-fit mb-0" Theme="twentyAI">
                @QuickGridColumns.Columns(_columnManager)
            </QuickGrid>
        </div>
    </div>
</div>
@code {
    private bool _isLoading = true;
    private List<UserDto> _items = new();
    private ColumnManager<UserDto> _columnManager = new();
    private QuickGrid<UserDto>? _grid;

    protected override void OnInitialized()
    {
        _columnManager.AddIndexColumn();
        _columnManager.Add(new() { Property = p => p.Id });
        _columnManager.Add(new() { Property = p => p.Name });
        _columnManager.Add(new() { Property = p => p.Age });
        _columnManager.Add(new() { Property = p => p.Country });

        _items = DataService.GetUsers();

        _isLoading = false;
    }

    private async Task SelectionChangedAsync()
    {
        if (_grid is null) return;

        await _grid.RefreshDataAsync();
    }

    public class DataService
    {
        public static List<UserDto> GetUsers()
        {
            var users = new List<UserDto>();

            users.Add(new UserDto { Id = 1, Name = "Alice", Country = "USA", Age = 25 });
            users.Add(new UserDto { Id = 2, Name = "Bob", Country = "Canada", Age = 32 });
            users.Add(new UserDto { Id = 3, Name = "Charlie", Country = "Mexico", Age = 45 });
            users.Add(new UserDto { Id = 4, Name = "David", Country = "Germany", Age = 22 });
            users.Add(new UserDto { Id = 5, Name = "Emma", Country = "France", Age = 39 });
            users.Add(new UserDto { Id = 6, Name = "Frank", Country = "UK", Age = 28 });
            users.Add(new UserDto { Id = 7, Name = "Grace", Country = "Australia", Age = 41 });
            users.Add(new UserDto { Id = 8, Name = "Henry", Country = "Russia", Age = 50 });
            users.Add(new UserDto { Id = 9, Name = "Isabella", Country = "Brazil", Age = 29 });
            users.Add(new UserDto { Id = 10, Name = "Jack", Country = "China", Age = 19 });
            users.Add(new UserDto { Id = 11, Name = "Katherine", Country = "India", Age = 36 });
            users.Add(new UserDto { Id = 12, Name = "Lucas", Country = "Spain", Age = 27 });
            users.Add(new UserDto { Id = 13, Name = "Mia", Country = "Argentina", Age = 31 });
            users.Add(new UserDto { Id = 14, Name = "Noah", Country = "Japan", Age = 24 });
            users.Add(new UserDto { Id = 15, Name = "Olivia", Country = "Italy", Age = 42 });
            users.Add(new UserDto { Id = 16, Name = "Patrick", Country = "South Korea", Age = 38 });
            users.Add(new UserDto { Id = 17, Name = "Quinn", Country = "South Africa", Age = 47 });
            users.Add(new UserDto { Id = 18, Name = "Ryan", Country = "Nigeria", Age = 26 });
            users.Add(new UserDto { Id = 19, Name = "Sophia", Country = "Egypt", Age = 33 });
            users.Add(new UserDto { Id = 20, Name = "Thomas", Country = "Kenya", Age = 30 });

            return users;
        }
    }
}